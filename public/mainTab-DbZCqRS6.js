import{V as C,$ as p,a1 as F,a2 as L,a3 as Z,a5 as A,U as H,aa as ue,eN as oe,a4 as _e,W as J,Y as k,Z as c,X as D,cy as ge,k as ee,a7 as he,ae as te,am as ve,dd as me,br as pe,df as ne,ak as N,dj as x,a0 as Q,i as _,bq as fe}from"./index-OONtJtwu.js";import{u as ae}from"./actions-BX_Ar3CW.js";import{I as se,u as Se,a as ce,S as G,R as I,c as $e}from"./appDialogsManager-C8SAIG4D.js";import{T as be,S as V}from"./focusInput-LFjxvRRW.js";import{L as ie,c as Pe}from"./lottieAnimation-DnYVwwDg.js";import"./page-BiwqSNVm.js";import"./avatar-C4hMhQyB.js";import"./putPreloader-Btr0jl3y.js";import"./htmlToSpan-DhAls8qz.js";import"./textToSvgURL-Cnw_Q8Rw.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-C9lEmsFQ.js";import"./codeInputField-D5VUINk2.js";const ke="_StaticSwitch_1gp49_1",ye="_checked_1gp49_10",Ce="_Handle_1gp49_13",Le="_Background_1gp49_17",z={StaticSwitch:ke,checked:ye,Handle:Ce,Background:Le},we=L("<div><div></div><div>"),Te=t=>(()=>{const l=we(),f=l.firstChild,b=f.nextSibling;return C(n=>{const d=z.StaticSwitch,i={[z.checked]:t.checked},e=z.Background,s=z.Handle;return d!==n._v$&&p(l,n._v$=d),n._v$2=F(l,i,n._v$2),e!==n._v$3&&p(f,n._v$3=e),s!==n._v$4&&p(b,n._v$4=s),n},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),l})(),Ee="_Overlay_deagn_36",Me="_Value_deagn_45",xe="_Select_deagn_52",Oe="_SelectClip_deagn_63",Be="_Option_deagn_75",Re="_selected_deagn_87",M={Overlay:Ee,Value:Me,Select:xe,SelectClip:Oe,Option:Be,selected:Re},Ke=L("<div>"),De=L("<div><div><div>"),Ae=L("<div><span>"),He=t=>{let l;const f=A(()=>t.options.find(o=>o.value===t.value)?.label),[b,n]=H();ue(()=>{n(f()())});const d=oe(()=>t.value),[i,e]=H();_e(()=>{const o=new te;o.add(window)("resize",()=>{t.isOpen&&t.onClose?.()}),J(()=>{o.removeAll()})});const s=(o,v)=>{const g=o.firstElementChild,u=g.querySelector(`.${M.selected}`);if(!u||!g)return;const r=l.getBoundingClientRect(),S=g.getBoundingClientRect(),m=u.getBoundingClientRect(),P=m.top-S.top,w=P+m.height,U=P+m.height/2,X=r.left+r.width/2;let T=r.top+r.height/2-U;const B=T+S.height>window.innerHeight||T<0;if(B&&(T+=Math.max(0,-T)+Math.min(0,window.innerHeight-(T+S.height))),g.style.setProperty("--x",""+X),g.style.setProperty("--y",""+T),g.animate({opacity:[0,1]},{duration:120}).finished.then(()=>{B&&v()}),B)return;const Y=Math.max(P,S.height-w),j=E=>`polygon(0% ${P-E}px, 100% ${P-E}px, 100% ${w+E}px, 0px ${w+E}px)`;ve(0,Y,400,E=>{g.style.setProperty("clip-path",j(E))},{easing:me,onEnd:()=>{g.style.removeProperty("clip-path"),v()}})},h=async(o,v)=>{await o.firstElementChild.animate({opacity:[1,0]},{duration:120}).finished,v()},y=o=>{const v=[t.parent,i()];if(!v.every(Boolean))return;v.every(u=>{const r=u.getBoundingClientRect();return Math.max(r.left-o.clientX,o.clientX-r.right,r.top-o.clientY,o.clientY-r.bottom)>100})&&t.onClose?.()};return[(()=>{const o=Ke(),v=l;return typeof v=="function"?D(v,o):l=o,k(o,b),C(()=>p(o,M.Value)),o})(),c(he,{get children(){return c(be,{appear:!0,onEnter:s,onExit:h,get children(){return A(()=>!!t.isOpen)()&&(()=>{const o=De(),v=o.firstChild,g=v.firstChild;return o.$$mousemove=y,o.$$click=u=>{u.stopPropagation(),t.onClose?.()},D(e,g),k(g,c(ge,{get each(){return t.options},children:u=>(()=>{const r=Ae(),S=r.firstChild;return r.$$click=t.onChange,r.$$clickData=u.value,D(ee,r,()=>!0),k(S,()=>u.label()),C(m=>{const P=M.Option,w={[M.selected]:d(u.value)};return P!==m._v$4&&p(r,m._v$4=P),m._v$5=F(r,w,m._v$5),m},{_v$4:void 0,_v$5:void 0}),r})()})),C(u=>{const r=M.Overlay,S=M.SelectClip,m=M.Select;return r!==u._v$&&p(o,u._v$=r),S!==u._v$2&&p(v,u._v$2=S),m!==u._v$3&&p(g,u._v$3=m),u},{_v$:void 0,_v$2:void 0,_v$3:void 0}),o})()}})}})]};Z(["click","mousemove"]);const Ie="_Container_1sz86_1",ze="_KeysContainer_1sz86_7",Ne="_KeyButton_1sz86_13",Ve="_selected_1sz86_35",Fe="_PlusIcon_1sz86_62",Ue="_TargetKey_1sz86_67",K={Container:Ie,KeysContainer:ze,KeyButton:Ne,selected:Ve,PlusIcon:Fe,TargetKey:Ue},Xe=L("<span>"),Ye=L("<div><div></div><div>"),je=L("<button>"),q=["Ctrl","Alt","Shift","Meta"],qe=t=>{const l=oe(()=>t.value,(n,d)=>d.includes(n)),f=n=>n==="Meta"?c(se,{icon:pe?"mac_command_key":"win_key"}):(()=>{const d=Xe();return k(d,n),d})(),b=n=>{if(t.value.includes(n)){const d=t.value.filter(i=>i!==n);if(!d.length){const i=[0,1,2,3].filter(e=>e!==q.indexOf(n));d.push(q[i[Math.floor(Math.random()*i.length)]])}t.onChange(d)}else t.onChange([...t.value,n])};return(()=>{const n=Ye(),d=n.firstChild,i=d.nextSibling;return k(d,()=>q.map(e=>(()=>{const s=je();return s.$$click=b,s.$$clickData=e,D(ee,s,()=>!0),k(s,()=>f(e)),C(h=>{const y=K.KeyButton,o={[K.selected]:l(e)};return y!==h._v$4&&p(s,h._v$4=y),h._v$5=F(s,o,h._v$5),h},{_v$4:void 0,_v$5:void 0}),s})())),k(n,c(se,{get class(){return K.PlusIcon},icon:"plus"}),i),k(i,()=>t.key),C(e=>{const s=K.Container,h=K.KeysContainer,y=K.TargetKey;return s!==e._v$&&p(n,e._v$=s),h!==e._v$2&&p(d,e._v$2=h),y!==e._v$3&&p(i,e._v$3=y),e},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()};Z(["click"]);const Qe="_MainDescription_1fup9_36",Ge="_FirstSection_1fup9_44",We="_Row_1fup9_49",Ze="_ShortcutBuilderRow_1fup9_54",Je="_collapsed_1fup9_63",et="_Hint_1fup9_68",O={MainDescription:Qe,FirstSection:Ge,Row:We,ShortcutBuilderRow:Ze,collapsed:Je,Hint:et},re=L("<div>"),tt=L('<div><button class="btn-primary btn-color-primary btn-large">'),W=(t,l)=>({appendTo:t.scrollable.container,duration:2500,from:"bottom",textElement:_(l),icon:"premium_lock",class:O.Hint,canCloseOnPeerChange:!1}),pt=()=>{const{rootScope:t}=ne(),l=Se(),[f,{mutate:b}]=N(()=>{const e=t.managers.appStateManager.getState().then(s=>s.settings?.passcode?.enabled||!1);return l.collect(e),e}),[n,d]=H(!1),i=new te;return i.add(t)("settings_updated",({key:e,value:s})=>{e===x("settings","passcode","enabled")&&b(s)}),J(()=>{i.removeAll()}),c(Q,{get when(){return f.state==="ready"},get children(){return A(()=>!!(f()||n()))()?c(st,{onDisable:()=>d(!0)}):c(nt,{})}})},nt=()=>{const[t,{AppPasscodeEnterPasswordTab:l,AppPasscodeLockTab:f}]=ce(),{enablePasscode:b}=ae(),{setQuizHint:n}=ne(),d=()=>{t.slider.createTab(l).open({onSubmit:e=>{i(e),e=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"})},i=e=>{t.slider.createTab(l).open({onSubmit:async(s,h)=>{if(s!==e)throw{};await b(s),s="",h.slider.sliceTabsUntilTab(f,h),h.close(),n(W(t,"PasscodeLock.PasscodeHasBeenSet"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"})};return c(G,{caption:"PasscodeLock.Notice",get children(){return[c(ie,{name:"UtyanPasscode"}),(()=>{const e=re();return k(e,()=>_("PasscodeLock.Description")),C(()=>p(e,O.MainDescription)),e})(),c(V,{amount:"0.5rem"}),(()=>{const e=tt(),s=e.firstChild;return s.$$click=d,D(ee,s,()=>!0),k(s,()=>_("PasscodeLock.TurnOn")),C(()=>p(e,Pe.AdditionalPadding)),e})(),c(V,{amount:"1rem"})]}})},st=t=>{const[l,{AppPasscodeEnterPasswordTab:f,AppPasscodeLockTab:b}]=ce(),{disablePasscode:n,changePasscode:d}=ae(),{rootScope:i,setQuizHint:e}=ne(),s=[{value:0,label:()=>_("PasscodeLock.Disabled")},{value:1,label:()=>_("MinutesShort",[1])},{value:5,label:()=>_("MinutesShort",[5])},{value:10,label:()=>_("MinutesShort",[10])},{value:15,label:()=>_("MinutesShort",[15])},{value:30,label:()=>_("MinutesShort",[30])}],[h,y]=H(),[o,v]=H(!1),[g,{mutate:u}]=N(()=>i.managers.appStateManager.getState().then(a=>a?.settings?.passcode?.autoLockTimeoutMins||0)),[r,{mutate:S}]=N(()=>i.managers.appStateManager.getState().then(a=>a?.settings?.passcode?.lockShortcutEnabled||!1)),[m,{mutate:P}]=N(()=>i.managers.appStateManager.getState().then(a=>a?.settings?.passcode?.lockShortcut||[])),w=new te;w.add(i)("settings_updated",({key:a,value:$})=>{a===x("settings","passcode","lockShortcut")?P($):a===x("settings","passcode","lockShortcutEnabled")?S($):a===x("settings","passcode","autoLockTimeoutMins")&&u($)});function U(a){P(a),i.managers.appStateManager.setByKey(x("settings","passcode","lockShortcut"),a)}function X(a){S(a),i.managers.appStateManager.setByKey(x("settings","passcode","lockShortcutEnabled"),a)}function T(a){u(a),i.managers.appStateManager.setByKey(x("settings","passcode","autoLockTimeoutMins"),a)}J(()=>{w.removeAll()});const B=()=>!fe&&m.state==="ready"&&r.state==="ready",Y=()=>{l.slider.createTab(f).open({onSubmit:a=>{j(a),a=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"},"PasscodeLock.EnterANewPasscode")},j=a=>{l.slider.createTab(f).open({onSubmit:async($,R)=>{if($!==a)throw{};await d($),$="",R.slider.sliceTabsUntilTab(b,R),R.close(),e(W(l,"PasscodeLock.PasscodeHasBeenChanged"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"},"PasscodeLock.ReEnterPasscode")},E=()=>{$e({title:_("PasscodeLock.TurnOff.Title"),description:_("PasscodeLock.TurnOff.Description"),button:{text:_("PasscodeLock.TurnOff"),isDanger:!0}}).then(async()=>{t.onDisable(),await n(),l.close(),e(W(l.slider.getTab(l.payload.AppPrivacyAndSecurityTab),"PasscodeLock.PasscodeHasBeenDisabled"))}).catch(()=>{})},le=[A(()=>_("PasscodeLock.Description")),c(V,{amount:"1rem"}),A(()=>_("PasscodeLock.Notice"))];return[c(G,{get class(){return O.FirstSection},caption:le,get children(){return[c(ie,{name:"UtyanPasscode"}),c(V,{amount:"1.125rem"}),c(I,{get title(){return _("PasscodeLock.TurnOff.Title")},icon:"lockoff",clickable:E}),c(I,{get title(){return _("PasscodeLock.ChangePasscode")},icon:"key",clickable:Y})]}}),c(G,{get caption(){return B()?"PasscodeLock.LockShortcutDescription":void 0},get children(){return[c(Q,{get when(){return g.state==="ready"},get children(){return c(I,{ref:y,get classList(){return{[O.Row]:!0}},get title(){return _("PasscodeLock.AutoLock")},get rightContent(){return c(He,{get value(){return g()},onClose:()=>v(!1),options:s,onChange:T,get isOpen(){return o()},get parent(){return h()}})},clickable:()=>{v(!0)}})}}),c(Q,{get when(){return B()},get children(){return[c(I,{get title(){return _("PasscodeLock.EnableLockShortcut")},get classList(){return{[O.Row]:!0}},get rightContent(){return c(Te,{get checked(){return r()}})},clickable:a=>{X(!r())}}),(()=>{const a=re();return k(a,c(qe,{get value(){return m()||[]},onChange:U,key:"L"})),C($=>{const R=O.ShortcutBuilderRow,de={[O.collapsed]:!r()};return R!==$._v$&&p(a,$._v$=R),$._v$2=F(a,de,$._v$2),$},{_v$:void 0,_v$2:void 0}),a})()]}})]}})]};Z(["click"]);export{pt as default};
//# sourceMappingURL=mainTab-DbZCqRS6.js.map
